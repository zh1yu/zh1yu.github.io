webpackJsonp([6],{ATGh:function(t,e){},"p+m3":function(t,e){},"vT+3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("aA9S"),o=i.n(r),a=i("3cXf"),s=i.n(a),n=i("I6ME"),l=i("2UHy"),c={name:"preview",data:function(){return{bottomPromotionReport:s()({spm:"3001.7729"}),reportClick:"",preview:{},imgWidth:95,imgHeight:71,contentMarginLeft:106,clients:[{id:"1",name:"华为云"},{id:"2",name:"广告"}],showContactUs:!1,showAdCloseaLink:!1,isAdClosed:!1,type:"",fType:"",carouselIdList:[585,588,589,590,591,592],positionId:""}},components:{closeBtn:i("gyYw").a},computed:{isCarouselAd:function(){return this.carouselIdList.includes(Number(this.positionId))},showAdStatus:function(){return void 0===this.preview.showAdStatus||this.preview.showAdStatus},clientName:function(){var t=this,e="广告";if(this.preview){var i=this.clients.find(function(e){return e.id===t.preview.client});i&&(e=i.name)}return e}},mounted:function(){},created:function(){var t=this;if(this.$route.params.id){var e=this.$route.query.spm||"",i=["positionId","queryWord","articleId","hk","adId"].reduce(function(e,i){return Object.hasOwnProperty.call(t.$route.query,i)&&(e[i]=t.$route.query[i]),e},{});this.positionId=i.positionId,this.getTemplatequery(this.$route.params.id,i,e)}else this.preview=o()({},this.templateData),this.type=this.templateType,this.fType=this.feedType,this.getImgArr()},watch:{feedType:function(t,e){this.fType=t},templateType:function(t,e){this.type=t},templateData:function(t,e){this.preview=o()({},t),this.getImgArr()}},props:{templateData:Object,templateType:String,feedType:String},methods:{reportByImgUrl:function(t){var e=document.createElement("img");e.style.display="none",e.src=t,e.addEventListener("load",function(){e.remove()}),document.body.append(e)},getImgArr:function(){if(this.preview.imgUrl&&("3"===this.fType||"3"===this.type)){var t;t=this.preview.imgUrl.split(","),this.preview.imgUrl=t}},getTemplatequery:function(t,e,i){var r=this;n.a.getTemplatequery(t,e).then(function(t){if(200===t.status){var o=t.data;if(!o)return;r.preview=o.templateContent;try{if(o.templateContent&&o.templateContent.redFlag&&o.templateContent.redFlagWord){var a=o.templateContent.redFlagWord.split(",");r.preview.title=Object(l.a)(o.templateContent.title,a),r.preview.abstract=Object(l.a)(o.templateContent.abstract,a)}}catch(t){r.preview.title=o.templateContent.title||"",r.preview.abstract=o.templateContent.abstract||""}r.preview.bottomingAdInfo&&r.preview.bottomingAdInfo.isShow&&(r.showAdCloseaLink=!0),r.preview.contactUsUrl&&r.preview.contactUsTitle&&(r.showContactUs=!0),r.type=o.templateType,r.fType=r.preview.feedType,r.getImgArr();var n=e.positionId,c=e.queryWord,p={mod:"kp_popu_"+n+"-"+o.adContentId,keyword:c,extra:s()(e)};i&&(p.spm=i),r.reportClick=s()(p)}}).catch(function(t){})},jumpToPreview:function(t){window.open(""+t)},hideIframe:function(){var t=document.querySelector("iframe");t&&(t.style.display="none");var e=document.body;e&&(e.style.display="none");var i=document.querySelector(".preview-wrapper");i&&(i.style.display="none")},sendDataToParent:function(t){try{window.parent.postMessage({type:"adIframeData",data:t},"*")}catch(t){}},getUrlParams:function(){for(var t={},e=window.location.href,i=/[?&]([^=#]+)=([^&#]*)/g,r=void 0;null!==(r=i.exec(e));){var o=decodeURIComponent(r[1]),a=decodeURIComponent(r[2]);t[o]=a}return t},getSpecificParam:function(t){var e=window.location.href,i=new RegExp("[?&]"+t+"=([^&#]*)"),r=e.match(i);return r?decodeURIComponent(r[1]):null},closeAd:function(){this.isAdClosed=!0,this.sendDataToParent(s()({action:"close",isAdClosed:this.isAdClosed,preview:this.preview,positionId:this.positionId})),this.preview.closeAdClickUrl&&this.reportByImgUrl(this.preview.closeAdClickUrl)}}},p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"preview-wrapper"},[t.isAdClosed?r("div",{staticClass:"close-ad-wrapper"},[r("p",[t._v("CSDN已关闭此广告")]),t._v(" "),t.showAdCloseaLink?r("a",{attrs:{target:"_blank",href:t.preview.bottomingAdInfo.url}},[t._v(t._s(t.preview.bottomingAdInfo.title))]):t._e()]):t._e(),t._v(" "),t.showContactUs?r("a",{staticClass:"contact-us",attrs:{href:t.preview.contactUsUrl,"data-report-click":t.bottomPromotionReport,"data-report-view":t.bottomPromotionReport,target:"_blank"}},[r("img",{attrs:{src:i("PyaB"),alt:""}}),t._v(" "),r("span",[t._v(t._s(t.preview.contactUsTitle||""))]),t._v(" "),r("img",{attrs:{src:i("3MA1"),alt:""}})]):t._e(),t._v(" "),"1"===t.type||"4"===t.type?r("div",{staticClass:"picture-ad"},[r("a",{staticStyle:{display:"block"},attrs:{rel:"nofollow",target:"_blank","data-report-click":t.reportClick},on:{click:function(e){return t.jumpToPreview(t.preview.clickUrl)}}},[r("img",{staticStyle:{width:"100%","object-fit":"cover","object-position":"top"},attrs:{src:t.preview.imgUrl,alt:""}})]),t._v(" "),t.isCarouselAd?t._e():r("closeBtn",{attrs:{preview:t.preview,client:t.clientName},on:{close:function(e){return t.closeAd()}}}),t._v(" "),r("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})],1):t._e(),t._v(" "),"2"===t.type&&"5"===t.fType?r("div",{staticClass:"template-blog"},[r("div",{staticClass:"template-blog-view"},[r("closeBtn",{attrs:{preview:t.preview,client:t.clientName},on:{close:function(e){return t.closeAd()}}}),t._v(" "),r("a",{staticClass:"blog_ad_content",attrs:{href:t.preview.clickUrl,rel:"nofollow",target:"_blank","data-report-click":t.reportClick}},[r("p",{staticClass:"title",domProps:{innerHTML:t._s(t.preview.title)}}),t._v(" "),r("p",{staticClass:"desc",domProps:{innerHTML:t._s(t.preview.abstract)}})]),t._v(" "),t.preview.imgUrl?r("a",{staticClass:"blog_ad_avatar",attrs:{rel:"nofollow",href:t.preview.clickUrl,target:"_blank","data-report-click":t.reportClick}},[r("img",{attrs:{src:t.preview.imgUrl,alt:""}})]):t._e()],1),t._v(" "),r("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})]):"2"===t.type&&"6"===t.fType?r("div",{staticClass:"template-blog-right-feed"},[r("a",{attrs:{href:t.preview.clickUrl,rel:"nofollow",target:"_blank","data-report-click":t.reportClick}},[r("img",{attrs:{src:t.preview.imgUrl,alt:""}}),t._v(" "),r("p",{domProps:{innerHTML:t._s(t.preview.title)}})]),t._v(" "),r("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})]):"2"===t.type?r("div",{staticClass:"feed-template"},["1"===t.fType?r("div",{staticClass:"ad-box ad-imgtxt-box clearfix"},[r("a",{staticStyle:{display:"block",overflow:"hidden"},attrs:{href:t.preview.clickUrl,rel:"nofollow",target:"_blank","data-report-click":t.reportClick}},[r("div",{staticClass:"img-box"},[r("img",{style:{width:t.imgWidth+"px",height:t.imgHeight+"px"},attrs:{src:t.preview.imgUrl,alt:""}})]),t._v(" "),r("div",{staticClass:"content-box",style:{marginLeft:t.contentMarginLeft+"px"}},[r("p",{staticClass:"tit",domProps:{innerHTML:t._s(t.preview.title)}}),t._v(" "),r("p",{staticClass:"intro",domProps:{innerHTML:t._s(t.preview.abstract)}})])]),t._v(" "),r("closeBtn",{attrs:{preview:t.preview,client:t.clientName},on:{close:function(e){return t.closeAd()}}}),t._v(" "),r("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})],1):t._e(),t._v(" "),"2"===t.fType?r("div",{staticClass:"ad-box ad-txt-box"},[r("a",{attrs:{href:t.preview.clickUrl,rel:"nofollow",target:"_blank","data-report-click":t.reportClick}},[r("p",{staticClass:"tit",domProps:{innerHTML:t._s(t.preview.title)}}),t._v(" "),r("p",{staticClass:"intro",domProps:{innerHTML:t._s(t.preview.abstract)}})]),t._v(" "),r("closeBtn",{attrs:{preview:t.preview,client:t.clientName},on:{close:function(e){return t.closeAd()}}}),t._v(" "),r("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})],1):t._e(),t._v(" "),"3"===t.fType?r("div",{staticClass:"ad-box"},[r("div",{staticClass:"pic_container"},[r("div",{staticClass:"pic_title",domProps:{innerHTML:t._s(t.preview.title)}}),t._v(" "),r("a",{staticClass:"pic_row",attrs:{href:t.preview.clickUrl,rel:"nofollow",target:"_blank","data-report-click":t.reportClick}},t._l(t.preview.imgUrl,function(t,e){return r("div",{key:e,staticClass:"pic_item"},[r("img",{attrs:{src:t}})])}),0),t._v(" "),r("closeBtn",{attrs:{preview:t.preview,client:t.clientName},on:{close:function(e){return t.closeAd()}}}),t._v(" "),r("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})],1)]):t._e(),t._v(" "),"4"===t.fType?r("div",{staticClass:"ad-box clearfix big_pic_container"},[r("a",{attrs:{href:t.preview.clickUrl,target:"_blank",rel:"nofollow","data-report-click":t.reportClick}},[r("p",{staticClass:"pic_title",domProps:{innerHTML:t._s(t.preview.title)}}),t._v(" "),r("img",{attrs:{src:t.preview.imgUrl,alt:""}})]),t._v(" "),r("closeBtn",{attrs:{preview:t.preview,client:t.clientName},on:{close:function(e){return t.closeAd()}}}),t._v(" "),r("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})],1):t._e()]):t._e(),t._v(" "),"3"===t.type?r("div",{staticClass:"ad-box"},[r("div",{staticClass:"pic_container"},[r("a",{staticClass:"pic_row",attrs:{href:t.preview.clickUrl,rel:"nofollow",target:"_blank","data-report-click":t.reportClick}},t._l(t.preview.imgUrl,function(t,e){return r("div",{key:e,staticClass:"pic_item interactiveAd"},[r("img",{attrs:{src:t}})])}),0),t._v(" "),r("closeBtn",{attrs:{preview:t.preview,client:t.clientName},on:{close:function(e){return t.closeAd()}}}),t._v(" "),r("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})],1)]):t._e()])};p._withStripped=!0;var d={render:p,staticRenderFns:[]},v=d;var m=!1;var w=i("C7Lr")(c,v,!1,function(t){m||(i("ATGh"),i("p+m3"))},"data-v-36749b0d",null);w.options.__file="src/pages/preview/Preview.vue";e.default=w.exports}});